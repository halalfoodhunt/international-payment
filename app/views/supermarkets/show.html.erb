<%= render 'layouts/header' %>
<div style="padding-left:0; padding-right:0; height:400px;" class="container-fluid">
  <div id="map" style="width:100%; height:400px;"></div>
  <script type="text/javascript">
  var map;
  var myCenter = {lat: <%= @supermarket.latitude %>, lng: <%= @supermarket.longitude %>};
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: myCenter,
      zoom: 15
    });
    var marker = new google.maps.Marker({
      position: myCenter,
      map: map,
    });
  }
  </script>
</div>
<div class="container-fluid show-bg" style="padding-bottom:50px;">
  <div class="container form-style">
    <div class="row">
      <div class="col-xs-12 col-sm-12 col-md-7">
        <div class="media">
          <div class="media-left">
            <a href="#">
              <%= image_tag @supermarket.logo.url(:medium), :class => "media-object img-circle" %>
            </a>
          </div>
          <div class="media-body">
            <h4 class="media-heading form-subtitle"><%= @supermarket.business_name %> (<%= @supermarket.qualifying_criterium.name %>)</h4>
            <table class="table">
              <thead>
                <tr><td><p><i class="fa fa-map-marker"></i> <%= @supermarket.operating_address %></p></td></tr>
                <tr><td><p><img src="https://maxcdn.icons8.com/windows10/PNG/16/User_Interface/email-16.png" title="Email" width="16"> <%= @supermarket.general_email %></p></td></tr>
                <tr><td><p><img src="https://maxcdn.icons8.com/iOS7/PNG/25/Mobile/phone-25.png" title="Email" width="16">+65  <%= @supermarket.general_contact %></p></td></tr>
                <tr><td><p><img src="https://maxcdn.icons8.com/windows8/PNG/26/Computer_Hardware/monitor-26.png" title="Monitor" width="16"> <%= link_to @supermarket.website, "#{@supermarket.website}" %></p></td></tr>
                <tr><td><p>Social sites: <%= link_to @supermarket.facebook do %><i class="fa fa-facebook-official"></i><% end %> <%= link_to @supermarket.instagram do %><i class="fa fa-instagram"></i><% end %></p></td>
                </tr>
              </thead>
            </table>
            <hr/>
          </div>
          <% @supermarket.friends_rewards.each do |friends_reward| %>
          <div class="container-fluid" style="background: white; padding:10px;">
            <div class="col-xs-12 col-sm-12 col-md-3">
              <div class="avatar"><center><%= image_tag friends_reward.reward_category.icon.url(:medium), :class => "img-circle img_responsive" %></center></div>
                <center><a href="http://www.halalfoodhunt.com/friends" class="btn btn-raised btn-material-green" role="button">Be a FRIEND</a>
              </center>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-9">
              <h4 class="form-subtitle" style="color:#044E2E">Friends Card Holders Only</h4>
              <p><%= friends_reward.terms %></p>
            </div>
          </div>
          <% end %>
          <div class="container-fluid">
            <h4 class="form-subtitle" style="color:#D04E2E;">FAQ</h4>
            <h5 class="question">What types of grocery items do you sell? Any specialty items?</h5>
            <p><%= h(@supermarket.question_1).gsub(/\n/, '<br>').html_safe %></p>
            <h5 class="question">What is the easiest way to get to your place by public transport?</h5>
            <p><%= h(@supermarket.question_2).gsub(/\n/, '<br>').html_safe %></p>
            <h5 class="question">Where is the nearest and easiest parking spot near your place?</h5>
            <p><%= h(@supermarket.question_3).gsub(/\n/, '<br>').html_safe %></p>
            <h5 class="question">Do you have a prayer space for me? If not, where is the nearest mosque or place that I can perform my prayers at?</h5>
            <p><%= h(@supermarket.question_4).gsub(/\n/, '<br>').html_safe %></p>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-12 col-md-5">
        <div class="container-fluid" style="border:#ccc solid 1px;">
          <h4 class="form-subtitle">Opening Hours</h4>
          <p><%= h(@supermarket.opening_hours).gsub(/\n/, '<br>').html_safe %></p>
        </div>
        <p><% @supermarket.deliveries.each do |delivery| %>
                <%= link_to "Order NOW!", raw(delivery.delivery_url), :class => "btn btn-block btn-raised btn-material-teal", :style => 'color:#fff;' %>
                <% end %>
              </p>
        <p><% @supermarket.reservations.each do |reservation| %>
                <%= link_to "Reserve NOW!", raw(reservation.reservation_url), :class => "btn btn-block btn-raised btn-material-red", :style => 'color:#fff;' %>
                <% end %>
              </p>
        <div class="row">
          <div class="col-xs-6">
            <%= image_tag @supermarket.photo_1.url(:square), :class => "img-thumbnail" %><br><br>
            <%= image_tag @supermarket.photo_2.url(:square), :class => "img-thumbnail" %>
          </div>
          <div class="col-xs-6">
           <%= image_tag @supermarket.photo_3.url(:square), :class => "img-thumbnail" %><br><br>
           <%= image_tag @supermarket.photo_4.url(:square), :class => "img-thumbnail" %>
         </div>
      </div>
      <br>
      <div class="container-fluid" style="border:#c2a476 solid 1px; background: white;">
        <h4 class="form-subtitle">Location</h4>
        <% @supermarket.locations.each do |location| %>
        <div class="col-xs-6 col-md-6"><p><%= image_tag location.icon.url(:thumb) %> <%= location.name %></p></div>
        <% end %>
      </div>
      <br>
      <div class="container-fluid" style="border:#c2a476 solid 1px; background: white;">
        <h4 class="form-subtitle">supermarket highlights</h4>
        <% @supermarket.supermarket_highlights.each do |supermarket_highlights| %>
        <div class="col-xs-6 col-md-6"><p><%= image_tag supermarket_highlights.icon.url(:thumb) %> <%= supermarket_highlights.name %></p></div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDps1UVNSRCldU_6BMPoJ09xuoHjvrqEGU&callback=initMap"
async defer></script>